/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package lab1;

import lab1.config.DaoConfig;
import lab1.config.GenericConfig;
import lab1.config.ServiceConfig;
import lab1.domain.Questionnaire;
import lab1.domain.Result;
import lab1.domain.Student;
import lab1.service.*;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.PropertySource;

@Configuration
@ComponentScan
public class App {


    public static void main(String[] args) {
        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext();
        context.register(DaoConfig.class);
        context.register(ServiceConfig.class);
        context.register(GenericConfig.class);
        context.refresh();
        StudentService studentService =  context.getBean(StudentService.class);
        Student student = studentService.register();

        QuestionnaireService questionnaireService = context.getBean(QuestionnaireService.class);
        try {
            Questionnaire questionnaire = questionnaireService.findByName("name");

            InquirerService inquirerService = context.getBean(InquirerService.class);
            Result result = inquirerService.makeInquirer(student, questionnaire);

            ScoringService scoringService = context.getBean(ScoringService.class);
            System.out.println(scoringService.evaluate(result));
        } catch (Exception e) {

        }

    }
}
